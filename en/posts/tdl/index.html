<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Language Translator - azuar4e</title><meta name=author content="Angel Azuara Eizaguirre"><meta name=description content="An university project for the course Language Translators."><meta name=keywords content='Java,Python'><meta itemprop=name content="Language Translator"><meta itemprop=description content="An university project for the course Language Translators."><meta itemprop=datePublished content="2025-06-17T12:30:24+02:00"><meta itemprop=dateModified content="2025-06-17T12:30:24+02:00"><meta itemprop=wordCount content="4174"><meta itemprop=keywords content="Java,Python"><meta property="og:url" content="https://azuar4e.github.io/en/posts/tdl/"><meta property="og:site_name" content="azuar4e"><meta property="og:title" content="Language Translator"><meta property="og:description" content="An university project for the course Language Translators."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-17T12:30:24+02:00"><meta property="article:modified_time" content="2025-06-17T12:30:24+02:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Language Translator"><meta name=twitter:description content="An university project for the course Language Translators."><meta name=twitter:site content="@azuar4e"><meta name=twitter:creator content="@azuar4e"><meta name=application-name content="azuar4e"><meta name=apple-mobile-web-app-title content="azuar4e"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical type=text/html href=https://azuar4e.github.io/en/posts/tdl/ title="Language Translator - azuar4e"><link rel=prev type=text/html href=https://azuar4e.github.io/en/posts/sos/ title="RESTful Service"><link rel=alternate type=text/markdown href=https://azuar4e.github.io/en/posts/tdl/index.md title="Language Translator - azuar4e"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Language Translator","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/azuar4e.github.io\/en\/posts\/tdl\/"},"genre":"posts","keywords":"Java, Python","wordcount":4174,"url":"https:\/\/azuar4e.github.io\/en\/posts\/tdl\/","datePublished":"2025-06-17T12:30:24+02:00","dateModified":"2025-06-17T12:30:24+02:00","publisher":{"@type":"Organization","name":"azuar4e","logo":"https:\/\/azuar4e.github.io\/images\/avatar.jpg"},"author":{"@type":"Person","name":"Angel Azuara Eizaguirre"},"description":"An university project for the course Language Translators."}</script><script src=/js/head/color-scheme.min.js></script></head><body data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/en/ title=azuar4e><span class=header-title-text>azuar4e</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/en/archives/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Archives</a></li><li class=menu-item><a class=menu-link href=/en/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-quote-left fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Select Language" title="Select Language"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><span class=text-secondary title=English>English</span></li><li class=menu-item><a href=/es/posts/tdl/ class=menu-link title=Español>Español</a></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title=azuar4e><span class=header-title-text>azuar4e</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><a class=menu-link href=/en/archives/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Archives</a></li><li class=menu-item><a class=menu-link href=/en/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-quote-left fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/en/posts/tdl/ selected disabled>English</option><option value=/es/posts/tdl/>Español</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item data-separator=/><a href=/en/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" data-separator=/ aria-current=page>Language Translator</li></ol></nav><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=Collections><div class="details related-details open"><div class="details-summary related-summary"><i class="fa-solid fa-fire fa-fade text-danger fa-fw" aria-hidden=true></i>
<span class=related-title>Related Content</span><i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class="details-content related-content"><ul class=related-list><li class=related-item><a href=/en/posts/sos/ title="RESTful Service">RESTful Service</a></li></ul></div></div></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Language Translator</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://www.linkedin.com/in/angel-azuara/ title=Author target=_blank rel="external nofollow noopener noreferrer author" class=author><img class=avatar src=/images/avatar.jpg alt="Angel Azuara Eizaguirre" height=16 width=16>&nbsp;Angel Azuara Eizaguirre</a></span><span class=post-included-in>&nbsp;included in <a href=/en/categories/university/ class=post-category title="Category - University"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> University</a>&ensp;<a href=/en/categories/personal-projects/ class=post-category title="Category - Personal Projects"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Personal Projects</a></span></div><div class=post-meta-line><span title="published on 2025-06-17 12:30:24"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2025-06-17>2025-06-17</time></span>&nbsp;<span title="4174 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>About 4200 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>20 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ol><li><a href=#introduction>Introduction</a></li><li><a href=#language-processor>Language Processor</a><ol><li><a href=#lexical-analyzer>Lexical analyzer</a></li><li><a href=#syntactic-analyzer>Syntactic analyzer</a></li><li><a href=#semantic-analyzer>Semantic analyzer</a></li><li><a href=#intermediate-code-generator>Intermediate code generator</a></li></ol></li><li><a href=#language-translator>Language Translator</a><ol><li><a href=#files-used>Files Used</a></li><li><a href=#functionality>Functionality</a></li></ol></li><li><a href=#usage>Usage</a><ol><li><a href=#installing-dependencies>Installing Dependencies</a></li><li><a href=#compiling-the-processor>Compiling the Processor</a></li><li><a href=#running-the-processor>Running the Processor</a></li><li><a href=#running-the-translator>Running the Translator</a></li><li><a href=#object-code-execution>Object code execution</a></li></ol></li><li><a href=#execution>Execution</a><ol><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#download>Download</a></li><li><a href=#assembler>Assembler</a></li></ol></li><li><a href=#tools>Tools</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></div><div class=content id=content><h2 class=heading-element id=introduction><span>1 Introduction</span>
<a href=#introduction class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>In this article, I explain how a compiler works, from processing the source file to translating it into object code. This post is based on a university project for the course <a href=https://dlsiis.fi.upm.es/traductores/index.html target=_blank rel="external nofollow noopener noreferrer">Language Translators</a>. All source code is available in my GitHub repository (link at the end, in the <a href=#tools>Tools</a> section).</p><p>The translator takes a source file written in the <a href=https://dlsiis.fi.upm.es/traductores/IntroBoreal.html target=_blank rel="external nofollow noopener noreferrer">Boreal Language</a>, previously validated by the processor, and generates an <code>.ens</code> file with the <strong>object code</strong> of the program, written in the <a href=https://dlsiis.fi.upm.es/traductores/Documentos/ENS2001.pdf target=_blank rel="external nofollow noopener noreferrer">ENS2001 Language</a>.</p><p>The project is divided into <strong>two main parts</strong>:</p><ul><li><strong>Language processor</strong>, written in <em>Java</em>, provided by the course and extended by us.</li><li><strong>Language translator</strong>, developed from scratch in <em>Python</em>.</li></ul><blockquote><p><strong>Note:</strong> This implementation only covers:</p><ul><li>The sentences <code>IF-THEN</code> and <code>IF-THEN-ELSE</code>.</li><li>The minimum operator <code>MIN</code>.</li><li>The procedures <code>PROCEDURE</code> with parameter passing by <em>value</em> and by <em>reference</em>.</li><li>The operators <code>*</code>, <code>AND</code> and <code>=</code> (comparison operator, <strong>not</strong> assignment).</li></ul><p>⚠️ The <em>rest of the operators</em> are <strong>not covered</strong>.</p><p>⚠️ No optimization is performed on the generated object code (assembly).</p><p>⚠️ <strong>The original Boreal language and the ENS2001 assembler materials may not be available temporarily.</strong>
This post focuses on my implementation of the compiler, not on the distribution of the original materials. If you need to consult them, you can try accessing it later or search for archived versions.</p><p><strong>Additional Note:</strong> All the code in this implementation is written in Spanish, as the course was taught in Spanish. However, this shouldn&rsquo;t be a problem, as the concepts are explained in English.</p></blockquote><h2 class=heading-element id=language-processor><span>2 Language Processor</span>
<a href=#language-processor class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>The language processor is responsible for validating that a source file has no <strong>lexical</strong>, <strong>syntactic</strong> or <strong>semantic</strong> errors.</p><p>This module is divided into <strong>four phases</strong>:</p><ul><li><strong>Lexical analyzer</strong></li><li><strong>Syntactic analyzer</strong></li><li><strong>Semantic analyzer</strong></li><li><strong>Intermediate code generator</strong>, which in reality belongs to the translator but is part of the processor&rsquo;s code.</li></ul><hr><p>Before starting, it is important to know the following concepts:</p><ul><li><strong>Symbol table</strong>: is responsible for storing identifiers of variables, constants, procedures, etc.</li></ul><p>E.g.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>TABLA PRINCIPAL #1:
</span></span><span class=line><span class=cl>*LEXEMA: &#39;S1&#39;           // lexeme
</span></span><span class=line><span class=cl>    Atributos:          //attributes
</span></span><span class=line><span class=cl>    + Tipo: &#39;cadena&#39;    //type
</span></span><span class=line><span class=cl>    + Despl: 4          //offset
</span></span><span class=line><span class=cl>    + Param: 0
</span></span><span class=line><span class=cl>*LEXEMA: &#39;IMPRIME&#39;
</span></span><span class=line><span class=cl>    Atributos:
</span></span><span class=line><span class=cl>    + Tipo: &#39;procedimiento&#39;
</span></span><span class=line><span class=cl>    + numParam: 2
</span></span><span class=line><span class=cl>    + TipoParam0: &#39;entero&#39;          //parameter type
</span></span><span class=line><span class=cl>    + TipoParam1: &#39;entero&#39;
</span></span><span class=line><span class=cl>    + ModoParam0: &#39;valor&#39;           //parameter mode (value or reference)
</span></span><span class=line><span class=cl>    + ModoParam1: &#39;valor&#39;
</span></span><span class=line><span class=cl>    + TipoRetorno: &#39;-&#39;              //return type
</span></span><span class=line><span class=cl>    + EtiqFuncion: &#39;EtiqProc2&#39;      //procedure label</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Parse</strong>: is responsible for storing the order in which the grammar rules are executed.</li></ul><p>E.g.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>bottom-up  2 21 20 19 20 20 18 17 17 17 17 15 9 100 20 100 20 ...</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>bottom-up</strong> indicates the type of parser used by the syntactic analyzer.</p></blockquote><ul><li><strong>Tokens</strong>: can be anything — a <code>for</code>, a <code>;</code>, the name of a variable, etc. The source file is split into tokens, which are stored in a separate file with this name.</li></ul><p>E.g.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;VAR,-&gt;
</span></span><span class=line><span class=cl>&lt;ID,1&gt;
</span></span><span class=line><span class=cl>&lt;DOSPUNTOS,-&gt; // collon
</span></span><span class=line><span class=cl>&lt;STRING,-&gt;
</span></span><span class=line><span class=cl>&lt;PYC,-&gt; // semicolon
</span></span><span class=line><span class=cl>&lt;ID,2&gt;
</span></span><span class=line><span class=cl>&lt;DOSPUNTOS,-&gt;
</span></span><span class=line><span class=cl>...</span></span></code></pre></td></tr></table></div></div><ul><li>Finally, the <strong>type of parser</strong>. In this case, we use a <em>bottom-up</em> parser, but there are also <em>top-down parsers</em>, <em>table-driven top-down parsers</em>, and others.</li></ul><hr><h3 class=heading-element id=lexical-analyzer><span>2.1 Lexical analyzer</span>
<a href=#lexical-analyzer class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>For <strong>lexical errors</strong>, we use a <strong>finite automaton</strong> that goes through the source file character by character. As it advances, it evaluates the states of the automaton, and if everything goes well, a <strong>tokens</strong> file is generated as output.</p><p>If any symbol does not fit the automaton, it is considered a <strong>lexical error</strong>.</p><p>E.g. of an automaton:</p><p><a class=lightgallery href=/en/posts/tdl/images/automata.PNG title="Example of an automaton" data-thumbnail=/en/posts/tdl/images/automata.PNG data-sub-html="<h2>Example of an automaton</h2>"><img loading=lazy src=/en/posts/tdl/images/automata.PNG alt="Example of an automaton" height=209 width=557></a></p><p>A typical case of a lexical error is an <strong>unterminated string</strong>. The following image shows an automaton that recognizes strings enclosed in quotes:</p><p><a class=lightgallery href=/en/posts/tdl/images/image.png title="Automaton for a string" data-thumbnail=/en/posts/tdl/images/image.png data-sub-html="<h2>Automaton for a string</h2>"><img loading=lazy src=/en/posts/tdl/images/image.png alt="Automaton for a string" height=544 width=1785></a></p><p>Here, <code>C</code> represents any character. To reach the final state and correctly recognize a string, we need to end with a <code>"</code>.</p><p>Lexical errors also include situations such as:</p><ul><li>A string that exceeds the maximum allowed length</li><li>A number out of range</li><li>Invalid characters in the language</li></ul><p>Among others.</p><hr><h3 class=heading-element id=syntactic-analyzer><span>2.2 Syntactic analyzer</span>
<a href=#syntactic-analyzer class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>For <strong>syntactic errors</strong>, we analyze the language structure through grammar rules. These errors appear when the sequence of tokens does not follow the expected syntax. This is where the concepts of first and follow come into play. To explain them, we show a fragment of a grammar:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Productions = {
</span></span><span class=line><span class=cl>Pprima -&gt; P
</span></span><span class=line><span class=cl>P -&gt; B P
</span></span><span class=line><span class=cl>P -&gt; F P
</span></span><span class=line><span class=cl>P -&gt; lambda
</span></span><span class=line><span class=cl>B -&gt; var T id Bprima ;
</span></span><span class=line><span class=cl>B -&gt; S
</span></span><span class=line><span class=cl>B -&gt; if ( E ) W
</span></span><span class=line><span class=cl>B -&gt; lambda
</span></span><span class=line><span class=cl>W -&gt; id Sprima
</span></span><span class=line><span class=cl>W -&gt; output E ;
</span></span><span class=line><span class=cl>W -&gt; input id ;
</span></span><span class=line><span class=cl>W -&gt; return X ;
</span></span><span class=line><span class=cl>W -&gt; Begin C End J
</span></span><span class=line><span class=cl>J -&gt; else Begin C End
</span></span><span class=line><span class=cl>J -&gt; lambda
</span></span><span class=line><span class=cl>Bprima -&gt; = E
</span></span><span class=line><span class=cl>Bprima -&gt; lambda
</span></span><span class=line><span class=cl>S -&gt; id Sprima
</span></span><span class=line><span class=cl>S -&gt; output E ;
</span></span><span class=line><span class=cl>S -&gt; input id ;
</span></span><span class=line><span class=cl>S -&gt; return X ;
</span></span><span class=line><span class=cl>Sprima -&gt; = E ;
</span></span><span class=line><span class=cl>Sprima -&gt; ( L ) ;
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>}</span></span></code></pre></td></tr></table></div></div><p>A <strong>terminal</strong> is a symbol that appears exactly as in the source language (<code>;</code>, <code>if</code>, <code>var</code>&mldr;).<br>A <strong>non-terminal</strong> represents a rule or construction of the grammar (<code>T</code>, <code>B</code>, <code>P</code>&mldr;).</p><ul><li><p>The set <strong>first</strong> of a non-terminal are all the terminals with which it can start.
For example, the <code>first(W)</code> would be: <code>id</code>, <code>output</code>, <code>input</code>, <code>return</code>, <code>{</code> (Begin).</p></li><li><p>The set <strong>follow</strong> of a non-terminal is all the terminals that can appear <strong>inmediately after</strong> it in a derivation.
For example, if <code>X</code> always follows <code>;</code>, then <code>follow(X) = { ; }</code>.</p></li></ul><p>If a rule can derive <strong>lambda</strong> (empty string), its <code>follow</code> also includes what could come after that point in the production.
E.g. in <code>P → B P</code> and <code>P → lambda</code>, since <code>P</code> can be empty, <code>follow(B)</code> includes what follows <code>P</code>, even the end-o-input symbol <code>$</code>.</p><p>A <strong>syntactic error</strong> occurs when the current token <strong>does not belong to the <code>first</code> set</strong> of the expected rule.<br>For example, if we expect a production of <code>W</code> and the next token is <code>if</code> (which is not in <code>first(W)</code>), it is a syntactic error.</p><blockquote><p>Tipical example: an <code>else</code> without its <code>if</code>, or an expression that is not closed.</p></blockquote><hr><h3 class=heading-element id=semantic-analyzer><span>2.3 Semantic analyzer</span>
<a href=#semantic-analyzer class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>For <strong>semantic errors</strong>, we use <strong>semantic actions</strong>, which define things such as:</p><ul><li>Attribute inheritance</li><li>Insertions into the symbol table</li><li>Type validations</li></ul><p>For example, in a rule like <code>W → output E ;</code>, For example, in a rule like <code>{ W.tipo := E.tipo }</code>, which asigns <code>W</code> the type of <code>E</code>.</p><p>In the code, this would be reflected by evaluating that case and updating the attribute stack.</p><p>A typical semantic error would be when the inherited type does not match the expected one.</p><hr><h3 class=heading-element id=intermediate-code-generator><span>2.4 Intermediate code generator</span>
<a href=#intermediate-code-generator class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>Returning to the translator, the intermediate code generator is an extension of the processor in which we define new semantic actions to generate the file containing the <strong>intermediate code</strong>, in this case, using the format of a <a href=https://dlsiis.fi.upm.es/traductores/Documentos/formato_fichero_cuartetos.pdf target=_blank rel="external nofollow noopener noreferrer">quadruples file</a> as defined by the course.</p><p>To do this, in our implementation we define <em>two new classes</em>, <code>gci.java</code> and <code>cuarteto.java</code> (quadruple).</p><p>In the first one, we define the following functions:</p><p><code>emite</code> (emit), which is the one that generates the quadruples:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>cuarteto</span><span class=w> </span><span class=nf>emite</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>operador</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>arg1</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>arg2</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>resultado</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>cuarteto</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>cuarteto</span><span class=p>(</span><span class=n>operador</span><span class=p>,</span><span class=w> </span><span class=n>arg1</span><span class=p>,</span><span class=w> </span><span class=n>arg2</span><span class=p>,</span><span class=w> </span><span class=n>resultado</span><span class=p>);</span><span class=w> </span><span class=c1>// create a quadruple withe an operator, two arguments and a result</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>printCuarteto</span><span class=p>(</span><span class=n>c</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>c</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p><code>nuevatemp</code> (new temporary), which creates a new temporary variable of the specified type and inserts it into the symbol table:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>tupla</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=nf>nuevatemp</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>tipo</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>nuevatemp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;t&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>conttemp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>conttemp</span><span class=o>++</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ASem</span><span class=p>.</span><span class=na>tsGlobal</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// main symbol table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Integer</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>addEntradaTSGlobal</span><span class=p>(</span><span class=n>nuevatemp</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>tipo</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;tipo_error&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setTipo</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=n>tipo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setTipo</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=n>tipo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setValorAtributoEnt</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=s>&#34;desplazamiento&#34;</span><span class=p>,</span><span class=w> </span><span class=n>ASem</span><span class=p>.</span><span class=na>despGlobal</span><span class=p>);</span><span class=w> </span><span class=c1>// set the offset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>tupla</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>tupla</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;VAR_GLOBAL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=p>);</span><span class=w> </span><span class=c1>// create a tuple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>tipo</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// increment the offset of the variable</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;lógico&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despGlobal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;entero&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despGlobal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;cadena&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despGlobal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>64</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>tupla</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// local symbol table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Integer</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>addEntradaTSLocal</span><span class=p>(</span><span class=n>nuevatemp</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>tipo</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;tipo_error&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setTipo</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=n>tipo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setTipo</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=n>tipo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>setValorAtributoEnt</span><span class=p>(</span><span class=n>pos</span><span class=p>,</span><span class=w> </span><span class=s>&#34;desplazamiento&#34;</span><span class=p>,</span><span class=w> </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=p>);</span><span class=w> </span><span class=c1>// set the offset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>tupla</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>tupla</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;VAR_LOCAL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=p>);</span><span class=w> </span><span class=c1>// create a tuple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>tipo</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// increment the offset of the variable</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;lógico&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;entero&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;cadena&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ASem</span><span class=p>.</span><span class=na>despLocal</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>64</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>tupla</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p><code>nuevaetiq</code> (new conditional jump), which creates a new label used for conditional and unconditional jumps:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>tupla</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>nuevaetiq</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>nombre</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>nuevaetiq</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>nombre</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>nuevaetiq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Etiq&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>contetiq</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>contetiq</span><span class=o>++</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>nuevaetiq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>nombre</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>tupla</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>tupla</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;ET&#34;</span><span class=p>,</span><span class=w> </span><span class=n>nuevaetiq</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>tupla</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>In the <code>cuarteto</code> class we define the <strong>cuarteto</strong> (quadruple) object and a <code>toString</code> method for its representation:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=nf>cuarteto</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>operador</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>arg1</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>arg2</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>resultado</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=na>operador</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>operador</span><span class=p>;</span><span class=w> </span><span class=c1>// operator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=na>arg1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>arg1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=na>arg2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>arg2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=na>resultado</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>resultado</span><span class=p>;</span><span class=w> </span><span class=c1>// result</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><hr><p>Regarding the semantic actions for intermediate code generation, they are defined in the <code>ASem.java</code> class alongside the actions of the semantic analyzer itself.</p><p>Below is a code snippet for the action <code>processRule(94, "Z -> id LL");</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>llAtb</span><span class=p>.</span><span class=na>getLongs</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// if the identifier has no parameters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>idTipo</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;procedimiento&#34;</span><span class=p>)){</span><span class=w> </span><span class=c1>// if it is a procedure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;CALL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoCad</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;etiqueta&#34;</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>paramRef2</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>())</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>paramRef2</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>()).</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;referencia&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=n>res</span><span class=p>.</span><span class=na>setReferencia</span><span class=p>(</span><span class=s>&#34;referencia&#34;</span><span class=p>);}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>identificadores</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>())</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>res</span><span class=p>.</span><span class=na>setLugar</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>gci</span><span class=p>.</span><span class=na>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;VAR_LOCAL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>procesador</span><span class=p>.</span><span class=na>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoEnt</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;desplazamiento&#34;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>identificadores</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>()))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>res</span><span class=p>.</span><span class=na>setLugar</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>gci</span><span class=p>.</span><span class=na>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;VAR_GLOBAL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>procesador</span><span class=p>.</span><span class=na>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoEnt</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;desplazamiento&#34;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>res</span><span class=p>.</span><span class=na>setLugar</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>gci</span><span class=p>.</span><span class=na>tupla</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;VAR_LOCAL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>procesador</span><span class=p>.</span><span class=na>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoEnt</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;desplazamiento&#34;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>    </span><span class=c1>// otherwise</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>referencias</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>paramRef</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>());</span><span class=w> </span><span class=c1>// a list of the type of parameter passing (value or reference)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>tipos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>paramTipo</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>());</span><span class=w> </span><span class=c1>// types of the parameters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>llAtb</span><span class=p>.</span><span class=na>getLongs</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>referencias</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// if the parameter is a value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>tipos</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>i</span><span class=p>).</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;cadena&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// if the parameter is a string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;PARAM_CAD&#34;</span><span class=p>,</span><span class=w> </span><span class=n>llAtb</span><span class=p>.</span><span class=na>getParam</span><span class=p>(</span><span class=n>i</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;PARAM&#34;</span><span class=p>,</span><span class=w> </span><span class=n>llAtb</span><span class=p>.</span><span class=na>getParam</span><span class=p>(</span><span class=n>i</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// if the parameter is a reference</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>tipos</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>i</span><span class=p>).</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;cadena&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;PARAM_REF_CAD&#34;</span><span class=p>,</span><span class=w> </span><span class=n>llAtb</span><span class=p>.</span><span class=na>getParam</span><span class=p>(</span><span class=n>i</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w> </span><span class=c1>// string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;PARAM_REF&#34;</span><span class=p>,</span><span class=w> </span><span class=n>llAtb</span><span class=p>.</span><span class=na>getParam</span><span class=p>(</span><span class=n>i</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoCad</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;tipoRetorno&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>switch</span><span class=p>(</span><span class=n>ret</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// depending on the return type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s>&#34;entero&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;CALL_FUN&#34;</span><span class=p>,</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoCad</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;etiqueta&#34;</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=n>res</span><span class=p>.</span><span class=na>getLugar</span><span class=p>());</span><span class=w> </span><span class=c1>// integer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s>&#34;cadena&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;CALL_FUN_CAD&#34;</span><span class=p>,</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoCad</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;etiqueta&#34;</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=n>res</span><span class=p>.</span><span class=na>getLugar</span><span class=p>());</span><span class=w> </span><span class=c1>// string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>gci</span><span class=p>.</span><span class=na>emite</span><span class=p>(</span><span class=s>&#34;CALL&#34;</span><span class=p>,</span><span class=w> </span><span class=n>Procesador</span><span class=p>.</span><span class=na>gestorTS</span><span class=p>.</span><span class=na>getValorAtributoCad</span><span class=p>(</span><span class=n>idAtb</span><span class=p>.</span><span class=na>getPos</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;etiqueta&#34;</span><span class=p>),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w> </span><span class=c1>// void</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>The semantic actions are divided into two branches:</p><ol><li><p><strong>If there are no parameters (<code>llAtb.getLongs() == 0</code>)</strong>:</p><ul><li>If <code>id</code> is a procedure → emit <code>CALL</code>.</li><li>If it is a variable → create a tuple with its scope (local or global) and offset in the symbol table, and assign it to <code>res.setLugar()</code> so that it is inherited by the rest of the tree and accessible in other rules.</li></ul></li><li><p><strong>If there are parameters</strong>:</p><ul><li>Emit the parameters one by one according to their type and whether they are passed by value or reference.</li><li>Emit <code>CALL_FUN</code>, <code>CALL_FUN_CAD</code>, or <code>CALL</code> depending on the return type. In this case, only <code>CALL</code> is possible since the translator is designed exclusively for procedures (without return value).</li></ul></li></ol><blockquote><p><code>res</code> is an object of the attributes class and is the return value of the action method. The actions also receive objects of the attributes class obtained from the semantic analyzer’s attribute stack.</p></blockquote><hr><h2 class=heading-element id=language-translator><span>3 Language Translator</span>
<a href=#language-translator class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>Once the source file has been validated, the files <code>tokens.txt</code>, <code>parse.txt</code>, <code>errores.txt</code>, <code>ts.txt</code>, and additionally the file <code>cuartetos.txt</code> are generated. Next, the <strong>object code generator</strong>, based on the <em>cuartetos file</em>, generates a <code>.ens</code> file.</p><p>As we have done previously, before diving into the code we need to understand:</p><p>A <strong>activation record</strong> (AR) is a contiguous memory area where the activation information of a subprogram is stored (each subprogram has its own).</p><p><a class=lightgallery href=/en/posts/tdl/images/image1.png title="Activation Record" data-thumbnail=/en/posts/tdl/images/image1.png data-sub-html="<h2>Activation Record</h2>"><img loading=lazy src=/en/posts/tdl/images/image1.png alt="Activation Record" height=283 width=228></a></p><ul><li><p>The <strong>machine state</strong> (MS) is the state before calling a subprogram.</p></li><li><p>The <strong>control pointer</strong> (pc) points to the AR of the calling subprogram. It is used at the end of the subprogram.</p></li><li><p>The <strong>access pointer</strong> (pa) points to the activation record of the subprogram where the current subprogram is declared. If <code>b</code> is defined in <code>a</code>, then the pa of <code>b</code> points to <code>a</code>. It is used to access non-local variables when there is function nesting.</p></li></ul><hr><h3 class=heading-element id=files-used><span>3.1 Files Used</span>
<a href=#files-used class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>In this implementation, we use three files:</p><ul><li><strong><code>_ens.py</code></strong>: handles the creation and writing of the <code>.ens</code> file.</li><li><strong><code>_gco.py</code></strong>: main file; translates each cuarteto into <code>.ens</code> instructions.</li><li><strong><code>_calcprev.py</code></strong>: calculates sizes of activation records (ARs) and the static data area (globals).</li></ul><h3 class=heading-element id=functionality><span>3.2 Functionality</span>
<a href=#functionality class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><code>_ens.py</code>: this module contains a single function that opens the <code>.ens</code> file in <strong>write mode</strong> and adds lines as needed:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>archivo</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>escribir</span><span class=p>(</span><span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>archivo</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>archivo</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>archivo</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;codobj.ens&#34;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>archivo</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>linea</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><code>_calcprev.py</code>: This script scans the symbol table (<code>ts.txt</code>) to calculate:</p><ul><li>The size of the <strong>static data area</strong>.</li><li>The sizes of each <strong>activation record</strong> (AR).</li><li>The <strong>references</strong> required for pass-by-reference parameters.</li></ul><p>We use <em>two helper functions</em>: one to read each line of the symbol table, and another to obtain the size of each type.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>leer</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>archivo</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>archivo</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>archivo</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;ts.txt&#34;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>archivo</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>reserva</span><span class=p>(</span><span class=n>tipo</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>tipo</span> <span class=o>==</span> <span class=s1>&#39;entero&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>tipo</span> <span class=o>==</span> <span class=s1>&#39;logico&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>tipo</span> <span class=o>==</span> <span class=s1>&#39;cadena&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>64</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span></span></span></code></pre></td></tr></table></div></div><p>Then, in the <code>main()</code> function, we perform a loop that:</p><ol><li><p>Reads the symbol table line by line.</p></li><li><p>For the <strong>local table</strong>:</p><ul><li><strong>Calculates</strong> the size of the AR by summing the sizes obtained with <code>reserva(...)</code>.</li><li><strong>Registers</strong> the offsets of the parameters passed by reference.</li></ul></li><li><p>For the <strong>global table</strong>:</p><ul><li><p><strong>Adds up</strong> the sizes of global variables.</p></li><li><p><strong>Adds</strong> the return size if it is a function/procedure.</p></li></ul></li><li><p>Finally, it generates the memory initialization directives and the <code>EQU</code> labels for each AR.</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>cadfinal</span>
</span></span><span class=line><span class=cl>    <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>tamestaticos</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># size of static data area</span>
</span></span><span class=line><span class=cl>    <span class=n>ras</span> <span class=o>=</span> <span class=mi>1</span> <span class=c1># AR number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>linea</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>locales</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span> <span class=c1># if the line is a local table</span>
</span></span><span class=line><span class=cl>            <span class=n>coleccion</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>ras</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>            <span class=n>desp</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>linea</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=o>!=</span> <span class=n>separador</span><span class=o>.</span><span class=n>strip</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>lexema</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=k>while</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tipo</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                        <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=n>desp</span> <span class=o>+=</span> <span class=n>reserva</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tipo</span><span class=p>,</span> <span class=n>linea</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                    <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=n>d</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>de</span><span class=p>,</span> <span class=n>linea</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>pr</span><span class=p>,</span> <span class=n>linea</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>referencias</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>ras</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=n>referencias</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>ras</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                        <span class=n>referencias</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>ras</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>d</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>coleccion</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>ras</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>desp</span>
</span></span><span class=line><span class=cl>            <span class=n>ras</span><span class=o>+=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>globales</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span> <span class=c1># if the line is a global table</span>
</span></span><span class=line><span class=cl>            <span class=n>rasaux</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>linea</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>lexema</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=k>while</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tipo</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                        <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=n>t</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tipo</span><span class=p>,</span> <span class=n>linea</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>t</span> <span class=o>!=</span> <span class=s1>&#39;funcion&#39;</span> <span class=ow>and</span> <span class=n>t</span> <span class=o>!=</span> <span class=s1>&#39;procedimiento&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>tamestaticos</span> <span class=o>+=</span> <span class=n>reserva</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>while</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>retorno</span><span class=p>,</span> <span class=n>linea</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                            <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                        <span class=n>aux</span> <span class=o>=</span> <span class=n>coleccion</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>rasaux</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                        <span class=n>aux</span> <span class=o>+=</span> <span class=n>reserva</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>retorno</span><span class=p>,</span> <span class=n>linea</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                        <span class=n>coleccion</span><span class=p>[</span><span class=sa>f</span><span class=s2>&#34;ra</span><span class=si>{</span><span class=n>rasaux</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>aux</span>
</span></span><span class=line><span class=cl>                        <span class=n>rasaux</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>cadfinal</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># If there are static data, reserve memory space and set label</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>tamestaticos</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>cadfinal</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>inicio_estaticas: RES </span><span class=si>{</span><span class=n>tamestaticos</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>cadfinal</span> <span class=o>+=</span> <span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>inicio_pila: NOP</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=c1># Mark the start of the stack</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>tamestaticos</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MOVE #inicio_estaticas, .IY</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1># The .IY register points to the beginning of the static data area</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MOVE #inicio_pila, .IX</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1># The .IX register points to the beginning of the stack</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># we generate the labels for the ARs</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>ra</span> <span class=ow>in</span> <span class=n>coleccion</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>escribir</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=si>{</span><span class=n>ra</span><span class=si>}</span><span class=s2>: EQU </span><span class=si>{</span><span class=n>coleccion</span><span class=p>[</span><span class=n>ra</span><span class=p>]</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\t\t\t</span><span class=s2>BR /main</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>Note:</strong> The variable <code>cadfinal</code> is not written here because its content is added to the end of the <code>.ens</code> file.</p></blockquote><p>Finally, we have <code>_gco.py</code>, the main file. Below is a snippet to understand how it works:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>patron_mul</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>\(MUL,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+) 
</span></span></span><span class=line><span class=cl><span class=s2>\)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>patron_and</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>\(AND,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+) 
</span></span></span><span class=line><span class=cl><span class=s2>\)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>patron_asig</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>\(ASIG,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+)  ,\s*
</span></span></span><span class=line><span class=cl><span class=s2>    ((?:\{[^</span><span class=si>{}</span><span class=s2>]*\}|[^,()])+) 
</span></span></span><span class=line><span class=cl><span class=s2>\)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span></span></span></code></pre></td></tr></table></div></div><p>We have a section with patterns to detect each possible quartet. For this, we use Python&rsquo;s <code>re</code> library (regular expressions).</p><p>These patterns are also used to extract offsets, names, scopes, and to detect the main program.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;</span><span class=se>\&#34;</span><span class=s2>\s*</span><span class=se>\&#34;</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ptloc</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;{VAR_LOCAL, (.+)}&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ptglob</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;{VAR_GLOBAL, (.+)}&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ptp</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;EtiqProc(\d+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ptf</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;EtiqFunc(\d+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ptm</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;main&#34;</span></span></span></code></pre></td></tr></table></div></div><p>Regarding the functions, we use the following:</p><ul><li><code>leer</code>: used to read each quartet.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>leer</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>archivo</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>archivo</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>archivo</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;cuartetos.txt&#34;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>archivo</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>declarar_cads</code>: allows us to declare string literals at the end of the output file. At the end of the main loop, we call this function with the <code>cadena</code> (string) attribute set to <code>None</code> and <code>write</code> set to <code>True</code>.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>declarar_cads</span><span class=p>(</span><span class=n>cadena</span><span class=p>,</span> <span class=n>write</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>cads</span><span class=p>,</span> <span class=n>cds</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cadena</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>p</span><span class=p>,</span> <span class=n>cadena</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cads</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>cads</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>cadena</span><span class=si>{</span><span class=n>cds</span><span class=si>}</span><span class=s2>:</span><span class=se>\t</span><span class=s2>&#34;</span> <span class=o>+</span> <span class=n>cadena</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>cads</span> <span class=o>=</span> <span class=n>cads</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>cadena</span><span class=si>{</span><span class=n>cds</span><span class=si>}</span><span class=s2>:</span><span class=se>\t</span><span class=s2>&#34;</span> <span class=o>+</span> <span class=n>cadena</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>write</span> <span class=ow>and</span> <span class=n>cads</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>cads</span> <span class=o>+=</span> <span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>escribir</span><span class=p>(</span><span class=n>cads</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>leer_cadena_ens</code>: with this function, we can transfer a declared string character by character to a register, or from one register to another. This is essential because, unlike integers, strings must be moved entirely character by character.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>leer_cadena_ens</span><span class=p>(</span><span class=n>cadena</span><span class=p>,</span> <span class=n>escad</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>bucles</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>escad</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>codobj</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE #</span><span class=si>{</span><span class=n>cadena</span><span class=si>}</span><span class=s2>, .R7
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R2
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R7
</span></span></span><span class=line><span class=cl><span class=s2>bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>:	    INC .R2
</span></span></span><span class=line><span class=cl><span class=s2>            INC .R7
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE [.R7], [.R2]
</span></span></span><span class=line><span class=cl><span class=s2>            CMP [.R7], #0
</span></span></span><span class=line><span class=cl><span class=s2>            BNZ $bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>codobj</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R3
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R2
</span></span></span><span class=line><span class=cl><span class=s2>bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>:	    INC .R3
</span></span></span><span class=line><span class=cl><span class=s2>            INC .R2
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE [.R2], [.R3]
</span></span></span><span class=line><span class=cl><span class=s2>            CMP [.R2], #0
</span></span></span><span class=line><span class=cl><span class=s2>            BNZ $bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>bucles</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=n>codobj</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>paramcad</code>: similar to the previous one, this function is used only when the parameter of a subprogram is a string.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>paramcad</span><span class=p>(</span><span class=n>des</span><span class=p>,</span> <span class=n>desra</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>bucles</span>
</span></span><span class=line><span class=cl>    <span class=n>codobj</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            ADD #</span><span class=si>{</span><span class=n>des</span><span class=si>}</span><span class=s2>, .IX
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE .A, .R2
</span></span></span><span class=line><span class=cl><span class=s2>            ADD #</span><span class=si>{</span><span class=n>desra</span><span class=si>}</span><span class=s2>, .IX
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE .A, .R3
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R3
</span></span></span><span class=line><span class=cl><span class=s2>            DEC .R2
</span></span></span><span class=line><span class=cl><span class=s2>bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>:	    INC .R3
</span></span></span><span class=line><span class=cl><span class=s2>            INC .R2
</span></span></span><span class=line><span class=cl><span class=s2>            MOVE [.R2], [.R3]
</span></span></span><span class=line><span class=cl><span class=s2>            CMP [.R2], #0
</span></span></span><span class=line><span class=cl><span class=s2>            BNZ $bucle</span><span class=si>{</span><span class=n>bucles</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>bucles</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=n>codobj</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>transformar_dir</code>: responsible for moving the memory addresses passed as parameters to the corresponding registers. There can be between one and three parameters. Basically, it receives something like <code>{VAR_GLOBAL, 3}</code> and moves the content at address <code>#3[.IY]</code> to a register such as <code>R2</code>. This is because it is global; if it were local, it would be <code>#3[.IX]</code>.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>transformar_dir</span><span class=p>(</span><span class=n>dir1</span><span class=p>,</span> <span class=n>dir2</span><span class=p>,</span> <span class=n>dir3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>ptglob</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;{VAR_GLOBAL, (.+)}&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>ptloc</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;{VAR_LOCAL, (.+)}&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>nreg</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nb>dir</span> <span class=ow>in</span> <span class=p>[</span><span class=n>dir1</span><span class=p>,</span> <span class=n>dir2</span><span class=p>,</span> <span class=n>dir3</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>dir</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>ptglob</span><span class=p>,</span> <span class=nb>dir</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>cad</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>ADD #</span><span class=si>{</span><span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>ptglob</span><span class=p>,</span> <span class=nb>dir</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=si>}</span><span class=s2>, .IY</span><span class=se>\n\t\t\t</span><span class=s2>MOVE .A, .R</span><span class=si>{</span><span class=n>nreg</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>nreg</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>ptloc</span><span class=p>,</span> <span class=nb>dir</span><span class=p>):</span> <span class=c1># if it is local, we have to add the size of the EM and PA</span>
</span></span><span class=line><span class=cl>            <span class=n>desp</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>ptloc</span><span class=p>,</span> <span class=nb>dir</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>cad</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>ADD #</span><span class=si>{</span><span class=n>desp</span><span class=si>}</span><span class=s2>, .IX</span><span class=se>\n\t\t\t</span><span class=s2>MOVE .A, .R</span><span class=si>{</span><span class=n>nreg</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>raact</span> <span class=ow>in</span> <span class=n>_calcprev</span><span class=o>.</span><span class=n>referencias</span> <span class=ow>and</span> <span class=n>desp</span> <span class=ow>in</span> <span class=n>_calcprev</span><span class=o>.</span><span class=n>referencias</span><span class=p>[</span><span class=n>raact</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>cad</span> <span class=o>+=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MOVE [.R</span><span class=si>{</span><span class=n>nreg</span><span class=si>}</span><span class=s2>], .R</span><span class=si>{</span><span class=n>nreg</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>            <span class=n>nreg</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>Finally, the main loop is responsible for calling the previous functions and iterating over each received quartet. Since this loop spans about 600 lines, here is the beginning to clearly show its operation.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>cds</span><span class=p>,</span> <span class=n>contador_llamadas</span><span class=p>,</span> <span class=n>primeraetiq</span><span class=p>,</span> <span class=n>contparam</span><span class=p>,</span> <span class=n>where</span><span class=p>,</span> <span class=n>contmin</span><span class=p>,</span> <span class=n>param_min</span><span class=p>,</span> <span class=n>raact</span><span class=p>,</span> <span class=n>esetiq</span>
</span></span><span class=line><span class=cl>    <span class=n>_calcprev</span><span class=o>.</span><span class=n>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>linea</span> <span class=o>=</span> <span class=n>leer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>linea</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>patron_mul</span><span class=p>,</span> <span class=n>linea</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>):</span> <span class=c1># multiplication pattern</span>
</span></span><span class=line><span class=cl>            <span class=n>esetiq</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=n>coincidencia</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>patron_mul</span><span class=p>,</span> <span class=n>linea</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>transformar_dir</span><span class=p>(</span><span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span> <span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>cadena</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MUL [.R2], [.R3]</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cadena</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cadena</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MOVE .A, [.R4]</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cadena</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>patron_and</span><span class=p>,</span> <span class=n>linea</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>):</span> <span class=c1># AND pattern</span>
</span></span><span class=line><span class=cl>            <span class=n>esetiq</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=n>coincidencia</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>patron_and</span><span class=p>,</span> <span class=n>linea</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>transformar_dir</span><span class=p>(</span><span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span> <span class=n>coincidencia</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>cadena</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>AND .R2, .R3&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cadena</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cadena</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\t\t\t</span><span class=s2>MOVE .A, .R4&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=n>cadena</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>escribir</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>As can be seen, this is a very straightforward loop where we evaluate each case and generate the corresponding object code.</p><hr><h2 class=heading-element id=usage><span>4 Usage</span>
<a href=#usage class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>This section details the steps necessary to install dependencies, compile the project, and run each component.</p><h3 class=heading-element id=installing-dependencies><span>4.1 Installing Dependencies</span>
<a href=#installing-dependencies class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>To install the processor library (<code>ts-lib.jar</code>) into your local Maven repository, run the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>mvn</span> <span class=n>install</span><span class=err>:</span><span class=nb>install-file</span> <span class=n>-Dfile</span><span class=p>=</span><span class=s2>&#34;.\lib\ts-lib.jar&#34;</span> <span class=n>-DgroupId</span><span class=p>=</span><span class=n>tslib</span> <span class=n>-DartifactId</span><span class=p>=</span><span class=nb>ts-lib</span> <span class=n>-Dversion</span><span class=p>=</span><span class=s2>&#34;1.0&#34;</span> <span class=n>-Dpackaging</span><span class=p>=</span><span class=n>jar</span></span></span></code></pre></td></tr></table></div></div><p>Or if you are on Linux or macOS:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mvn install:install-file -Dfile<span class=o>=</span><span class=s2>&#34;./lib/ts-lib.jar&#34;</span> -DgroupId<span class=o>=</span>tslib -DartifactId<span class=o>=</span>ts-lib -Dversion<span class=o>=</span><span class=s2>&#34;1.0&#34;</span> -Dpackaging<span class=o>=</span>jar</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=compiling-the-processor><span>4.2 Compiling the Processor</span>
<a href=#compiling-the-processor class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>Once the library is installed, build the processor executable with:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>mvn</span> <span class=n>clean</span> <span class=n>package</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=running-the-processor><span>4.3 Running the Processor</span>
<a href=#running-the-processor class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>After compiling, you can run the processor with the following command (replace the path with that of your Boreal file):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java -jar .<span class=se>\t</span>arget<span class=se>\t</span>dl-1.0-SNAPSHOT-jar-with-dependencies.jar .<span class=se>\r</span>uta<span class=se>\a</span>l<span class=se>\f</span>icheroBoreal.txt</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=running-the-translator><span>4.4 Running the Translator</span>
<a href=#running-the-translator class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>From the <code>gco/</code> folder, where the translator executable is located, run:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>.\</span><span class=n>_gco</span> <span class=p>..\</span><span class=n>tdl</span><span class=p>\</span><span class=n>src</span><span class=p>\</span><span class=n>test</span><span class=p>\</span><span class=n>resources</span><span class=p>\</span><span class=n>ficheroboreal</span><span class=p>.</span><span class=n>txt</span></span></span></code></pre></td></tr></table></div></div><p>Or if you are on Linux or macOS:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./_gco ../tdl/src/test/resources/ficheroboreal.txt</span></span></code></pre></td></tr></table></div></div><p>This will generate all the processor files as well as the <code>cuartetos.txt</code> (intermediate code) and <code>codobj.ens</code> (object code) files.</p><h3 class=heading-element id=object-code-execution><span>4.5 Object code execution</span>
<a href=#object-code-execution class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>To run the <code>.ens</code> file, you need to download the assembler (available in the <em>Tools</em> section), compile it, and execute it with the generated <code>codobj.ens</code> file.</p><hr><h2 class=heading-element id=execution><span>5 Execution</span>
<a href=#execution class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>This section explains how to run the code generated by the translator, and tests different examples to understand its behavior.</p><blockquote><p><strong>Note:</strong> Only the Windows explanation is covered here, since on Linux the assembler lacks an interface and is less illustrative.</p></blockquote><h3 class=heading-element id=prerequisites><span>5.1 Prerequisites</span>
<a href=#prerequisites class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><ol><li>Ensure you have compiled the project (see <a href=#usage>Usage</a> section).</li><li>Generated <code>codobj.ens</code> file (object code).</li></ol><h3 class=heading-element id=download><span>5.2 Download</span>
<a href=#download class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>To do this, we need to download the assembler (available in the <a href=#tools>Tools</a> section). After extracting the archive, we get a folder named <code>ENS2001-Windows</code> like the following:</p><p><a class=lightgallery href=/en/posts/tdl/images/image2.png title="Download Folder" data-thumbnail=/en/posts/tdl/images/image2.png data-sub-html="<h2>Download Folder</h2>"><img loading=lazy src=/en/posts/tdl/images/image2.png alt="Download Folder" height=760 width=845></a></p><p>Except for the <code>codobj.ens</code> file, which is the one we will assemble, the rest of the files come by default. Some examples and two files that are recommended to read are included: <code>readme.txt</code> and <code>bugs.txt</code>.</p><h3 class=heading-element id=assembler><span>5.3 Assembler</span>
<a href=#assembler class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>The assembler is the executable shown selected in the screenshot above (<code>winens</code>).</p><p>Once launched, you will see an interface like the following:</p><p><a class=lightgallery href=/en/posts/tdl/images/image3.png title=Assembler data-thumbnail=/en/posts/tdl/images/image3.png data-sub-html="<h2>Assembler</h2>"><img loading=lazy src=/en/posts/tdl/images/image3.png alt=Assembler height=416 width=628></a></p><p>To clearly see what the assembler is doing, it is recommended to open the following windows:</p><p><a class=lightgallery href=/en/posts/tdl/images/image4.png title=Windows data-thumbnail=/en/posts/tdl/images/image4.png data-sub-html="<h2>Windows</h2>"><img loading=lazy src=/en/posts/tdl/images/image4.png alt=Windows height=138 width=211></a></p><ul><li><p>The <strong>código fuente (source code) window</strong> shows the order in which the object code instructions are executed. In this case, since no file has been loaded yet, all addresses are at <code>NOP</code>.</p><p><a class=lightgallery href=/en/posts/tdl/images/image5.png title="Source Code" data-thumbnail=/en/posts/tdl/images/image5.png data-sub-html="<h2>Source Code</h2>"><img loading=lazy src=/en/posts/tdl/images/image5.png alt="Source Code" height=291 width=259></a></p></li><li><p>The <strong>registros (registers) window</strong> shows the state of the machine registers.</p><p><a class=lightgallery href=/en/posts/tdl/images/image6.png title=Registers data-thumbnail=/en/posts/tdl/images/image6.png data-sub-html="<h2>Registers</h2>"><img loading=lazy src=/en/posts/tdl/images/image6.png alt=Registers height=427 width=164></a></p></li><li><p>The <strong>pila (stack) window</strong> shows the contents of the data stack.</p><p><a class=lightgallery href=/en/posts/tdl/images/image7.png title=Stack data-thumbnail=/en/posts/tdl/images/image7.png data-sub-html="<h2>Stack</h2>"><img loading=lazy src=/en/posts/tdl/images/image7.png alt=Stack height=292 width=154></a></p></li></ul><p>To load the <code>codobj.ens</code> file, go to <code>Archivo > Abrir y Ensamblar</code>. If everything goes well, it will tell you the assembly was successful:</p><p><a class=lightgallery href=/en/posts/tdl/images/image8.png title="Assembly Window" data-thumbnail=/en/posts/tdl/images/image8.png data-sub-html="<h2>Assembly Window</h2>"><img loading=lazy src=/en/posts/tdl/images/image8.png alt="Assembly Window" height=416 width=626></a></p><p>Now we are ready to run the assembler. Pressing ▶️ will execute the assembler and show the result. If our code calls console output functions, the console will open. In this case, we assembled the file <code>expr.txt</code> (available in the GitHub repository), and the result is as follows:</p><p><a class=lightgallery href=/en/posts/tdl/images/image9.png title="Assembler Result" data-thumbnail=/en/posts/tdl/images/image9.png data-sub-html="<h2>Assembler Result</h2>"><img loading=lazy src=/en/posts/tdl/images/image9.png alt="Assembler Result" height=351 width=459></a></p><p>We enter a digit as requested and press enter.</p><p><a class=lightgallery href=/en/posts/tdl/images/image10.png title="Assembler Result 2" data-thumbnail=/en/posts/tdl/images/image10.png data-sub-html="<h2>Assembler Result 2</h2>"><img loading=lazy src=/en/posts/tdl/images/image10.png alt="Assembler Result 2" height=351 width=459></a></p><p>We type our name:</p><p><a class=lightgallery href=/en/posts/tdl/images/image11.png title="Assembler Result 3" data-thumbnail=/en/posts/tdl/images/image11.png data-sub-html="<h2>Assembler Result 3</h2>"><img loading=lazy src=/en/posts/tdl/images/image11.png alt="Assembler Result 3" height=605 width=737></a></p><p>After this, the program finishes its execution successfully.</p><hr><h2 class=heading-element id=tools><span>6 Tools</span>
<a href=#tools class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>Both the language processor and the symbolic assemblers used to assemble the object code (ENS2001) are available at the following link:</p><blockquote><p>👉 <a href=https://dlsiis.fi.upm.es/traductores/Herramientas.html target=_blank rel="external nofollow noopener noreferrer">https://dlsiis.fi.upm.es/traductores/Herramientas.html</a></p></blockquote><p>You can find the source code for this implementation in my GitHub repository:</p><blockquote><p>👉 <a href=https://github.com/azuar4e/TDL target=_blank rel="external nofollow noopener noreferrer">https://github.com/azuar4e/TDL</a></p></blockquote><hr><h2 class=heading-element id=conclusion><span>7 Conclusion</span>
<a href=#conclusion class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>This project is a great opportunity to learn and dive deeper into how a compiler works. Even though it’s based on a language and an assembler that are not used in development, it serves as a simple and didactic example to explain key concepts.</p><p>Again, you can find the source code in my GitHub repository.</p><p>Have a nice life! 👋</p></div><hr class=awesome-hr><h2 id=see-also>Related Content</h2><ul><li><a href=/en/posts/sos/ title="RESTful Service">RESTful Service</a></li></ul><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2025-06-17 12:30:24">Updated on 2025-06-17&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/en/posts/tdl/index.md title="Read Markdown" class=link-to-markdown>Read Markdown</a></span><span><a href="https://github.com/azuar4e/azuar4e.github.io/blob/main/content/posts/university/tdl/index.md?plain=1" title="View source" target=_blank rel="external nofollow noopener noreferrer" class=link-to-source>View source</a></span><span><a href=https://github.com/azuar4e/azuar4e.github.io/edit/main/content/posts/university/tdl/index.md title="Edit this page" target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>Edit this page</a></span><span><a href="https://github.com/azuar4e/azuar4e.github.io/issues/new?title=[BUG]%20Language+Translator&amp;body=%7cField%7cValue%7c%0A%7c-%7c-%7c%0A%7cTitle%7cLanguage+Translator%7c%0A%7cURL%7chttps://azuar4e.github.io/en/posts/tdl/%7c%0A%7cFilename%7chttps://github.com/azuar4e/azuar4e.github.io/blob/main/content/posts/university/tdl/index.md?plain=1%7c" title="Report issue" target=_blank rel="external nofollow noopener noreferrer" class=link-to-report>Report issue</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on X" data-sharer=twitter data-url=https://azuar4e.github.io/en/posts/tdl/ data-title="Language Translator" data-via=azuar4e data-hashtags=Java,Python><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://azuar4e.github.io/en/posts/tdl/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://azuar4e.github.io/en/posts/tdl/ data-title="Language Translator" data-web><i class="fa-brands fa-whatsapp fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://azuar4e.github.io/en/posts/tdl/><i class="fa-brands fa-reddit fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/en/tags/java/ class=post-tag title="Tags - Java">Java</a><a href=/en/tags/python/ class=post-tag title="Tags - Python">Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class=post-nav><a href=/en/posts/sos/ class=post-nav-item rel=prev title="RESTful Service"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>RESTful Service</a></div></div></article><aside class=toc id=toc-auto aria-label=Contents><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line powered order-1">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.147.8"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.3.21-b2e6f70a"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright order-2" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2025</span><span class=author itemprop=copyrightHolder>
<a href=https://www.linkedin.com/in/angel-azuara/ target=_blank rel="external nofollow noopener noreferrer">Angel Azuara Eizaguirre</a></span></div><div class="footer-line statistics order-3"><span class=site-time title='Website running ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">Website running ...</span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/azuar4e/azuar4e.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true" width="56" height="56"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#8581dd;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>This website works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{enable:!1},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,search:{algoliaAppID:"L5YIFQ7E5O",algoliaIndex:"miblog_algolia_en",algoliaSearchKey:"4730818b3e23ce341fdbb2edbce34eda",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:50,type:"algolia"},siteTime:"2025-06-20T00:00:00+02:00",version:"v0.3.21-b2e6f70a"}</script><script src=/js/theme.min.js defer></script></body></html>